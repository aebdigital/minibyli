const blogData = {
    "5-dovodov-microgreens": {
        title: "5 dôvodov, prečo začať jesť microgreens už dnes",
        date: "15. január 2024",
        category: "Zdravie",
        author: "MiniBýli Team",
        featuredImage: "../sources/prodkty/minislnecnica.jpg",
        lead: "Microgreens sú malé zázraky prírody, ktoré sa v posledných rokoch stali symbolom zdravej výživy. Tieto mladé rastlinky obsahujú koncentrované množstvo živín a ponúkajú neuveriteľné zdravotné benefity.",
        content: [
            {
                type: "heading",
                level: 2,
                text: "1. Extrémne vysoký obsah živín"
            },
            {
                type: "paragraph",
                text: "Štúdie ukázali, že microgreens obsahujú <strong>20 až 40-krát viac vitamínov, minerálov a antioxidantov</strong> ako ich dospelé verzie. Napríklad červená kapusta microgreens obsahuje 40-krát viac vitamínu E a 6-krát viac vitamínu C ako dospelá kapusta."
            },
            {
                type: "heading",
                level: 2,
                text: "2. Posilňujú imunitný systém"
            },
            {
                type: "paragraph",
                text: "Vysoký obsah vitamínu C, beta-karoténu a ďalších antioxidantov v microgreens pomáha posilniť prirodzenú obranyschopnosť organizmu. Pravidelná konzumácia môže výrazne znížiť riziko prechladnutia a iných infekcií."
            },
            {
                type: "quote",
                text: "Microgreens sú ako prírodné multivitamíny - malé, ale mimoriadne účinné.",
                cite: "Dr. Zhenlei Xiao, výskumník University of Maryland"
            },
            {
                type: "heading",
                level: 2,
                text: "3. Podporujú zdravie srdca"
            },
            {
                type: "paragraph",
                text: "Vysoký obsah draslíka, horčíka a antioxidantov v microgreens pomáha regulovať krvný tlak a znižuje riziko kardiovaskulárnych ochorení. Osobitne účinné sú microgreens z červenej kapusty a brokolice."
            },
            {
                type: "heading",
                level: 2,
                text: "4. Zlepšujú trávenie"
            },
            {
                type: "paragraph",
                text: "Microgreens sú bohaté na enzýmy, ktoré podporujú zdravé trávenie a pomáhajú telu lepšie absorbovať živiny z ostatných potravín. Navyše obsahujú prebiotické vlákniny, ktoré podporujú zdravú črevnú mikroflóru."
            },
            {
                type: "heading",
                level: 2,
                text: "5. Jednoduché na konzumáciu"
            },
            {
                type: "paragraph",
                text: "Na rozdiel od niektorých \"superpotravin\", microgreens majú jemnú, príjemnú chuť a ľahko sa včleňujú do každodenného jedálnička. Stačí ich pridať do:"
            },
            {
                type: "list",
                items: [
                    "Šalátov a wrap-ov",
                    "Smoothies a džúsov",
                    "Sendvičov a toastov",
                    "Polievok a hlavných jedál",
                    "Ako ozdoba na akékoľvek jedlo"
                ]
            },
            {
                type: "tip",
                title: "Tip od MiniBýli",
                text: "Začnite malými dávkami - pridajte si každý deň do jedla aspoň jednu lyžicu microgreens. Postupne zvyšujte množstvo, ako si zvyknete na novú chuť."
            },
            {
                type: "heading",
                level: 2,
                text: "Záver"
            },
            {
                type: "paragraph",
                text: "Microgreens sú jednoduchý a chutný sposôb, ako výrazne zlepšiť kvalitu svojej výživy. S ich vysokým obsahom živín, ľahkou dostupnosťou a univerzálnosťou použitia neexistuje dôvod, prečo ich nezačať konzumovať už dnes."
            },
            {
                type: "paragraph",
                text: "Chcete vyskúšať naše čerstvé microgreens? <a href=\"kontakt.html\">Kontaktujte nás</a> alebo si pozrite našu <a href=\"../produkty.html\">ponuku produktov</a>."
            }
        ],
        relatedPosts: [
            {
                id: "ako-pestovat-microgreens",
                title: "Ako si vypestovať microgreens doma",
                icon: "fas fa-seedling"
            }
        ]
    },
    "ako-pestovat-microgreens": {
        title: "Ako si vypestovať microgreens doma",
        date: "22. január 2024",
        category: "Pestovanie",
        author: "MiniBýli Team",
        featuredImage: "../sources/jedllo/jedlo3.jpg",
        lead: "Pestovanie microgreens je jednoduché a nevyžaduje žiadne špeciálne znalosti ani veľký priestor. Stačí vám okno, pár základných pomôcok a trocha trpezlivosti.",
        content: [
            {
                type: "heading",
                level: 2,
                text: "Čo budete potrebovať"
            },
            {
                type: "list",
                items: [
                    "Kvalitné semená určené na microgreens",
                    "Plytké nádoby s odtokovými otvormi",
                    "Substrát alebo kokosové vlákno",
                    "Rozprašovač na vodu",
                    "Miesto s dostatok svetla"
                ]
            },
            {
                type: "heading",
                level: 2,
                text: "Postup pestovania krok za krokom"
            },
            {
                type: "paragraph",
                text: "1. <strong>Príprava substrátu:</strong> Naplňte nádobu substrátom do výšky 2-3 cm a jemne ho zvlhčite."
            },
            {
                type: "paragraph",
                text: "2. <strong>Výsev semien:</strong> Rovnomerne rozložte semená po povrchu. Semená by sa mali dotýkať, ale nemal by vzniknúť príliš hustý koberec."
            },
            {
                type: "paragraph",
                text: "3. <strong>Začiatok rastu:</strong> Prvé 2-3 dni držte nádobu v tme a pravidelne kropte vodou."
            },
            {
                type: "paragraph",
                text: "4. <strong>Svetelná fáza:</strong> Keď rastlinky dosiahnu výšku 1-2 cm, presuňte ich na svetlé miesto."
            },
            {
                type: "paragraph",
                text: "5. <strong>Zber:</strong> Po 7-14 dňoch (podľa druhu) sú microgreens pripravené na zber."
            },
            {
                type: "tip",
                title: "Tip od MiniBýli",
                text: "Pre začiatočníkov odporúčame začať s ľahko pestovateľnými druhmi ako sú redkovka, hráškové microgreens alebo slnečnicové."
            }
        ],
        relatedPosts: [
            {
                id: "5-dovodov-microgreens",
                title: "5 dôvodov, prečo začať jesť microgreens už dnes",
                icon: "fas fa-heart"
            }
        ]
    }
};

function loadBlogPost(postId) {
    const post = blogData[postId];
    if (!post) {
        console.error('Blog post not found:', postId);
        return;
    }
    
    // Add article structured data
    addArticleStructuredData(postId, post);
    
    // Update page title and meta
    document.getElementById('page-title').textContent = `${post.title} - MiniBýli Blog`;
    document.getElementById('blog-title').textContent = post.title;
    document.getElementById('blog-date').innerHTML = `<i class="fas fa-calendar"></i> ${post.date}`;
    document.getElementById('blog-category').innerHTML = `<i class="fas fa-tag"></i> ${post.category}`;
    document.getElementById('blog-author').innerHTML = `<i class="fas fa-user"></i> ${post.author}`;
    
    // Update featured image
    const featuredImage = document.getElementById('featured-image');
    featuredImage.src = post.featuredImage;
    featuredImage.alt = post.title;
    
    // Render content
    const contentContainer = document.getElementById('blog-content');
    let contentHtml = `<p class="lead">${post.lead}</p>`;
    
    post.content.forEach(block => {
        switch (block.type) {
            case 'heading':
                contentHtml += `<h${block.level}>${block.text}</h${block.level}>`;
                break;
            case 'paragraph':
                contentHtml += `<p>${block.text}</p>`;
                break;
            case 'list':
                contentHtml += `<ul>${block.items.map(item => `<li>${item}</li>`).join('')}</ul>`;
                break;
            case 'quote':
                contentHtml += `<blockquote><p>"${block.text}"</p><cite>${block.cite}</cite></blockquote>`;
                break;
            case 'tip':
                contentHtml += `
                    <div class="tip-box">
                        <h3><i class="fas fa-lightbulb"></i> ${block.title}</h3>
                        <p>${block.text}</p>
                    </div>
                `;
                break;
        }
    });
    
    contentContainer.innerHTML = contentHtml;
    
    // Render related posts
    const relatedContainer = document.getElementById('related-posts');
    const relatedHtml = post.relatedPosts.map(related => `
        <a href="blog-template.html?post=${related.id}" class="related-post">
            <i class="${related.icon}"></i>
            <span>${related.title}</span>
        </a>
    `).join('');
    relatedContainer.innerHTML = relatedHtml;
}

function getBlogPostId() {
    const path = window.location.pathname;
    const segments = path.split('/');
    const filename = segments[segments.length - 1];
    
    if (filename === 'blog-template.html') {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('post');
    }
    
    // Extract post ID from filename (e.g., blog-post-1.html -> 5-dovodov-microgreens)
    const fileMap = {
        'blog-post-1.html': '5-dovodov-microgreens',
        'blog-post-2.html': 'ako-pestovat-microgreens'
    };
    
    return fileMap[filename];
}

function addArticleStructuredData(postId, post) {
    // Remove existing article schema if any
    const existingSchema = document.querySelector('script[data-article-schema]');
    if (existingSchema) {
        existingSchema.remove();
    }
    
    // Create new article schema
    const schema = {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": post.title,
        "description": post.lead,
        "image": `https://minibylia.sk/${post.featuredImage.replace('../', '')}`,
        "url": `https://minibylia.sk/subpages/blog-post-${postId}.html`,
        "datePublished": convertDateToISO(post.date),
        "dateModified": convertDateToISO(post.date),
        "author": {
            "@type": "Organization",
            "name": post.author,
            "url": "https://minibylia.sk"
        },
        "publisher": {
            "@type": "Organization",
            "name": "MiniBýli",
            "logo": {
                "@type": "ImageObject",
                "url": "https://minibylia.sk/logo.svg"
            }
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": `https://minibylia.sk/subpages/blog-post-${postId}.html`
        },
        "articleSection": post.category,
        "keywords": "microgreens, zdravá strava, mikrobylinky, pestovanie, výživa"
    };
    
    const script = document.createElement('script');
    script.type = 'application/ld+json';
    script.setAttribute('data-article-schema', 'true');
    script.textContent = JSON.stringify(schema);
    document.head.appendChild(script);
}

function convertDateToISO(dateStr) {
    // Convert "15. január 2024" to ISO format
    const months = {
        'január': '01', 'február': '02', 'marec': '03', 'apríl': '04',
        'máj': '05', 'jún': '06', 'júl': '07', 'august': '08',
        'september': '09', 'október': '10', 'november': '11', 'december': '12'
    };
    
    const parts = dateStr.split(' ');
    const day = parts[0].replace('.', '').padStart(2, '0');
    const month = months[parts[1]];
    const year = parts[2];
    
    return `${year}-${month}-${day}`;
}